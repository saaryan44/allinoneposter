(this.webpackJsonpreacting=this.webpackJsonpreacting||[]).push([[0],{36:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),s=n(10),c=n(13),o=n(8),i=n(11),u=n(0),l=n(2),p=n(24),j=n(1),h=function(){var e=Object(u.useState)({name:"",email:"",stuff:[],thispost:""}),t=Object(i.a)(e,2),n=t[0],a=t[1],c=function(){var e=Object(s.a)(r.a.mark((function e(t){var s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/home",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thispost:n.thispost})});case 3:return s=e.sent,e.next=6,s.json();case 6:(c=e.sent)?(alert(c.message),a(Object(o.a)(Object(o.a)({},n),{},{stuff:[].concat(Object(p.a)(n.stuff),[n.thispost])}))):alert("error in posting");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/home",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a({name:n.name,email:n.email,stuff:n.posts});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){return l()}),[]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("h1",{children:["hi ",n.name]}),Object(j.jsxs)("h5",{style:{float:"right"},children:["logged in as ",n.email]}),Object(j.jsx)("hr",{}),Object(j.jsx)("div",{children:Object(j.jsxs)("form",{method:"post",autocomplete:"off",onSubmit:c,children:[Object(j.jsx)("textarea",{cols:"34",rows:"14",placeholder:"what's on your mind? ",onChange:function(e){return a(Object(o.a)(Object(o.a)({},n),{},{thispost:e.target.value}))}}),Object(j.jsx)("input",{type:"submit",value:"post"})]})}),Object(j.jsx)("hr",{}),Object(j.jsx)("ol",{style:{listStyleType:"upper-alpha"},children:n.stuff.map((function(e){return Object(j.jsx)("li",{children:e.toString()})}))})]})},m=function(){var e=Object(u.useState)({email:"",password:""}),t=Object(i.a)(e,2),n=t[0],a=t[1],p=Object(l.f)(),h=function(e){a(Object(o.a)(Object(o.a)({},n),{},Object(c.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,password:n.password})});case 3:return a=e.sent,e.next=6,a.json();case 6:(s=e.sent).ok?(alert("hello ".concat(s.name,"!")),p.push("/home")):alert("failed to login. try again.");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{id:"form",children:[Object(j.jsxs)("form",{onSubmit:m,autocomplete:"off",method:"post",children:[Object(j.jsx)("input",{type:"email",name:"email",placeholder:"email",value:n.email,onChange:h}),Object(j.jsx)("input",{type:"password",name:"password",placeholder:"password",value:n.password,onChange:h}),Object(j.jsx)("input",{type:"submit",value:"login"})]})," "]})},b=function(){var e=Object(u.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],l=Object(u.useState)({name:"",password:"",email:""}),p=Object(i.a)(l,2),h=p[0],b=p[1],d=function(){var e=Object(s.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h.name,email:h.email,password:h.password})});case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent).ok?alert("logged in successfully, ".concat(h.email)):alert("problem in logging in. try again. \n ".concat(a.message));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){b(Object(o.a)(Object(o.a)({},h),{},Object(c.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{children:[Object(j.jsxs)("form",{method:"post",onSubmit:d,children:[Object(j.jsx)("input",{type:"text",placeholder:"name",name:"name",value:h.name,onChange:f}),Object(j.jsx)("input",{type:"text",placeholder:"email",name:"email",value:h.email,onChange:f}),Object(j.jsx)("input",{type:"password",placeholder:"password",name:"password",value:h.password,onChange:f}),Object(j.jsx)("input",{type:"submit",value:"register"})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)("h4",{children:["Toggle ",Object(j.jsx)("button",{onClick:function(){return a(!n)},children:"Log in "})," here"]}),Object(j.jsx)("section",{children:n&&Object(j.jsx)(m,{})})]})},d=function(){return Object(j.jsx)("div",{children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/",exact:!0,component:b}),Object(j.jsx)(l.a,{path:"/home",component:h})]})})},f=n(23),O=n.n(f),x=n(18);O.a.render(Object(j.jsx)(x.a,{children:Object(j.jsx)(d,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.c78199c5.chunk.js.map